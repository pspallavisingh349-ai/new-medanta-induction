<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Medanta Lucknow | New Healer Induction</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --medanta-maroon: #8B1538;
            --medanta-dark: #6d0f2b;
            --medanta-gold: #D4AF37;
            --cream: #FAF7F0;
            --cream-dark: #F5F0E6;
            --text-dark: #2C1810;
            --text-light: #666;
            --white: #FFFFFF;
            --shadow: rgba(139, 21, 56, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--cream);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* SMOOTH ANIMATIONS */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* HEADER WITH LOGO */
        .header {
            background: linear-gradient(135deg, var(--white) 0%, var(--cream) 100%);
            padding: 30px 20px;
            text-align: center;
            border-bottom: 1px solid rgba(139, 21, 56, 0.1);
            position: relative;
        }

        .logo-container {
            max-width: 280px;
            margin: 0 auto 15px;
            position: relative;
        }

        .medanta-logo {
            width: 100%;
            height: auto;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.05));
        }

        .header-tagline {
            font-family: 'Playfair Display', serif;
            color: var(--medanta-maroon);
            font-size: 14px;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-top: 10px;
            font-weight: 400;
        }

        /* HERO SECTION */
        .hero {
            background: linear-gradient(135deg, var(--medanta-maroon) 0%, var(--medanta-dark) 100%);
            color: var(--white);
            padding: 40px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212,175,55,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .jci-seal {
            width: 100px;
            height: 100px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, #FFD700, #D4AF37);
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 3px solid rgba(255,255,255,0.3);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .jci-text {
            font-size: 10px;
            font-weight: 700;
            color: var(--medanta-maroon);
            line-height: 1.2;
        }

        .hero h1 {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }

        .hero p {
            font-size: 16px;
            opacity: 0.9;
            font-weight: 300;
        }

        /* CONTENT CARDS */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 4px 20px var(--shadow);
            border: 1px solid rgba(139, 21, 56, 0.05);
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            color: var(--medanta-maroon);
            margin-bottom: 10px;
            text-align: center;
        }

        .card-subtitle {
            text-align: center;
            color: var(--text-light);
            font-size: 14px;
            margin-bottom: 25px;
        }

        /* FORM STYLING */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: var(--medanta-maroon);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid #E8E0D5;
            border-radius: 12px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            background: var(--cream);
            transition: all 0.3s;
            color: var(--text-dark);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--medanta-maroon);
            background: var(--white);
            box-shadow: 0 0 0 4px rgba(139, 21, 56, 0.05);
        }

        select.form-input {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%238B1538' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
        }

        /* BUTTONS */
        .btn {
            width: 100%;
            padding: 18px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--medanta-maroon) 0%, var(--medanta-dark) 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(139, 21, 56, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(139, 21, 56, 0.4);
        }

        .btn-gold {
            background: linear-gradient(135deg, #D4AF37 0%, #B8941F 100%);
            color: var(--white);
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3);
        }

        .btn-gold:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(212, 175, 55, 0.4);
        }

        /* HANDBOOK CARD */
        .handbook-card {
            background: linear-gradient(135deg, var(--medanta-maroon) 0%, var(--medanta-dark) 100%);
            color: var(--white);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(139, 21, 56, 0.2);
        }

        .handbook-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(212,175,55,0.15) 0%, transparent 60%);
        }

        .handbook-content {
            position: relative;
            z-index: 1;
        }

        .handbook-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .handbook-title {
            font-family: 'Playfair Display', serif;
            font-size: 22px;
            margin-bottom: 10px;
        }

        .handbook-desc {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 20px;
            font-weight: 300;
        }

        /* STATS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: var(--white);
            border-radius: 16px;
            padding: 20px 10px;
            text-align: center;
            box-shadow: 0 4px 15px var(--shadow);
            border-top: 3px solid var(--medanta-gold);
        }

        .stat-number {
            font-size: 28px;
            font-weight: 700;
            color: var(--medanta-maroon);
            display: block;
            line-height: 1;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* MODULES */
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 5px;
        }

        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            color: var(--medanta-maroon);
        }

        .section-count {
            background: var(--medanta-gold);
            color: var(--white);
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .module-grid {
            display: grid;
            gap: 12px;
        }

        .module-card {
            background: var(--white);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 10px var(--shadow);
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .module-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 20px var(--shadow);
            border-left-color: var(--medanta-maroon);
        }

        .module-card.completed {
            border-left-color: var(--medanta-gold);
            background: linear-gradient(to right, #FFFBF0, var(--white));
        }

        .module-info h3 {
            font-size: 16px;
            color: var(--text-dark);
            margin-bottom: 4px;
            font-weight: 600;
        }

        .module-info p {
            font-size: 13px;
            color: var(--text-light);
        }

        .module-status {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--cream);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .module-card.completed .module-status {
            background: var(--medanta-gold);
            color: var(--white);
        }

        /* QUIZ SCREEN */
        .quiz-header {
            background: var(--white);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 10px var(--shadow);
            margin-bottom: 20px;
            border-radius: 0 0 20px 20px;
        }

        .back-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--cream-dark);
            background: var(--white);
            color: var(--medanta-maroon);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: var(--medanta-maroon);
            color: var(--white);
            border-color: var(--medanta-maroon);
        }

        .quiz-title {
            flex: 1;
            font-weight: 600;
            color: var(--medanta-maroon);
        }

        .progress-pill {
            background: var(--cream);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            color: var(--medanta-maroon);
            font-weight: 500;
        }

        /* QUESTION CARD */
        .question-wrapper {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            margin: 20px;
            box-shadow: 0 4px 20px var(--shadow);
        }

        .question-number {
            font-size: 12px;
            font-weight: 600;
            color: var(--medanta-gold);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .question-text {
            font-size: 18px;
            color: var(--text-dark);
            line-height: 1.5;
            margin-bottom: 25px;
            font-weight: 500;
        }

        .options-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            background: var(--cream);
            border: 2px solid transparent;
            border-radius: 12px;
            padding: 16px 20px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option:hover {
            background: var(--white);
            border-color: var(--medanta-maroon);
            box-shadow: 0 2px 8px var(--shadow);
        }

        .option-letter {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: var(--white);
            color: var(--medanta-maroon);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            border: 2px solid var(--cream-dark);
            flex-shrink: 0;
        }

        .option:hover .option-letter {
            background: var(--medanta-maroon);
            color: var(--white);
            border-color: var(--medanta-maroon);
        }

        .option.correct {
            background: #E8F5E9;
            border-color: #4CAF50;
        }

        .option.correct .option-letter {
            background: #4CAF50;
            color: var(--white);
            border-color: #4CAF50;
        }

        .option.wrong {
            background: #FFEBEE;
            border-color: #F44336;
        }

        .option.wrong .option-letter {
            background: #F44336;
            color: var(--white);
            border-color: #F44336;
        }

        /* CONFETTI */
        #confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        .confetti-piece {
            position: absolute;
            width: 10px;
            height: 10px;
            background: var(--medanta-gold);
            animation: confetti-fall 3s linear forwards;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* XP POPUP */
        .xp-popup {
            position: fixed;
            color: var(--medanta-gold);
            font-size: 24px;
            font-weight: 700;
            pointer-events: none;
            z-index: 10000;
            animation: xp-float 1.5s ease-out forwards;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            font-family: 'Inter', sans-serif;
        }

        @keyframes xp-float {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: translateY(-100px) scale(1); opacity: 0; }
        }

        .hidden { display: none !important; }

        /* Responsive */
        @media (max-width: 480px) {
            .hero h1 { font-size: 24px; }
            .card { padding: 25px 20px; }
            .stats-grid { gap: 10px; }
            .stat-number { font-size: 24px; }
        }
    </style>
<base target="_blank">
</head>
<body>
    <div id="confetti-container"></div>

    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="fade-in">
        <div class="header">
            <div class="logo-container">
                <img src="Medanta Lucknow Logo.jpg" alt="Medanta Lucknow" class="medanta-logo" onerror="this.style.display='none'; document.getElementById('fallback-text').style.display='block';">
                <div id="fallback-text" style="display: none; font-family: 'Playfair Display', serif; font-size: 28px; color: var(--medanta-maroon); font-weight: 700;">
                    MEDANTA<br><span style="font-size: 16px; color: #666; font-weight: 400;">LUCKNOW</span>
                </div>
            </div>
            <div class="header-tagline">Institute of Medicine</div>
        </div>

        <div class="hero">
            <div class="hero-content">
                <div class="jci-seal">
                    <div class="jci-text">JCI</div>
                    <div class="jci-text" style="font-size: 8px;">GOLD</div>
                </div>
                <h1>Welcome Healer</h1>
                <p>Begin your journey of excellence</p>
            </div>
        </div>

        <div class="container">
            <div class="card">
                <h2 class="card-title">New Hire Registration</h2>
                <p class="card-subtitle">Complete your induction training</p>

                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="name" placeholder="Enter your full name">
                </div>

                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="email" placeholder="name@medanta.org">
                </div>

                <div class="form-group">
                    <label class="form-label">Department</label>
                    <select class="form-input" id="dept">
                        <option value="">Select your department</option>
                        <option>Nursing</option>
                        <option>Emergency Medicine</option>
                        <option>Cardiology</option>
                        <option>Orthopedics</option>
                        <option>Neurology</option>
                        <option>Oncology</option>
                        <option>Administration</option>
                        <option>Human Resources</option>
                        <option>IT & Systems</option>
                        <option>Finance</option>
                        <option>Operations</option>
                        <option>Pharmacy</option>
                        <option>Laboratory</option>
                        <option>Radiology</option>
                        <option>Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Mobile Number</label>
                    <input type="tel" class="form-input" id="mobile" placeholder="+91 98765 43210">
                </div>

                <div class="form-group">
                    <label class="form-label">Employee ID (Optional)</label>
                    <input type="text" class="form-input" id="empId" placeholder="MED-XXXX">
                </div>

                <button class="btn btn-primary" onclick="doLogin()" style="margin-top: 10px;">
                    Begin Journey ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard" class="hidden">
        <div class="header" style="padding: 20px;">
            <div class="logo-container" style="max-width: 200px; margin-bottom: 0;">
                <img src="Medanta Lucknow Logo.jpg" alt="Medanta" class="medanta-logo" style="max-height: 60px; width: auto;">
            </div>
        </div>

        <div class="container">
            <!-- Handbook Card -->
            <div class="handbook-card">
                <div class="handbook-content">
                    <div class="handbook-icon">üìñ</div>
                    <div class="handbook-title">Employee Handbook</div>
                    <div class="handbook-desc">Your comprehensive guide to Medanta policies and procedures</div>
                    <a href="https://online.flippingbook.com/view/652486186/" target="_blank" class="btn btn-gold" style="width: auto; padding: 12px 30px; display: inline-block; text-decoration: none;" onclick="openHandbook()">
                        Read Handbook
                    </a>
                </div>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-box">
                    <span class="stat-number" id="statModules">0</span>
                    <span class="stat-label">Modules<br>Done</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number" id="statXP" style="color: var(--medanta-gold);">0</span>
                    <span class="stat-label">XP<br>Earned</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number" id="statPercent">0%</span>
                    <span class="stat-label">Complete</span>
                </div>
            </div>

            <!-- Modules -->
            <div class="section-header">
                <h2 class="section-title">Training Modules</h2>
                <span class="section-count">17 Topics</span>
            </div>

            <div class="module-grid" id="moduleList">
                <!-- Modules injected here -->
            </div>
        </div>
    </div>

    <!-- QUIZ SCREEN -->
    <div id="quizScreen" class="hidden">
        <div class="quiz-header">
            <button class="back-btn" onclick="backToDash()">‚Üê</button>
            <div class="quiz-title" id="quizTitle">Module Title</div>
            <div class="progress-pill">Question <span id="qCurrent">1</span>/<span id="qTotal">10</span></div>
        </div>

        <div class="question-wrapper">
            <div class="question-number">Question <span id="qNum">1</span></div>
            <div class="question-text" id="qText">Question text goes here?</div>

            <div class="options-list" id="options">
                <!-- Options injected here -->
            </div>
        </div>
    </div>

    <script>
        // QUESTION BANK
        const modules = {
            "A01": { title: "HR & Workplace Safety", questions: [
                {q:"How many Privilege Leave in a year?", options:["30","40","10","24"], correct:1},
                {q:"Which platform for leave application?", options:["My Hub","Adrenalin MAX","Both","None"], correct:2},
                {q:"What to do if late for work?", options:["Do nothing","Inform supervisor","Wait","Ask colleague"], correct:1},
                {q:"Employee right at workplace?", options:["Demand favors","Safe environment","Extended breaks","Refuse work"], correct:1},
                {q:"How to report grievance?", options:["Discuss colleague","Ignore","Formal procedure","None"], correct:2},
                {q:"Sexual harassment means?", options:["Uncomfortable approaches","FALSE","Avoiding","Irritated"], correct:0},
                {q:"Can harassment occur outside work?", options:["TRUE","FALSE","",""], correct:0},
                {q:"Most common occupational hazard?", options:["Needle stick","Noise","Musculoskeletal","Respiratory"], correct:0},
                {q:"Which act governs safety?", options:["Factories Act","POSH Act","Industrial","Workmen"], correct:1},
                {q:"NOT a workplace hazard?", options:["Poor lighting","Chemicals","Proper machinery","Workload"], correct:2}
            ]},
            "A02": { title: "Second Victim Support", questions: [
                {q:"Who described Second Victim?", options:["Dr Albert Wu","Nightingale","Dr Gawande","WHO"], correct:0},
                {q:"What % experience Second Victim?", options:["10-20%","30-50%","60-70%","80-90%"], correct:1},
                {q:"NOT a trigger event?", options:["Medication errors","Patient death","Staff meeting","Complaints"], correct:2},
                {q:"Common emotional response?", options:["Shock","Joy","Excitement","Indifference"], correct:0},
                {q:"Stage with intrusive thoughts?", options:["Chaos","Intrusive","Inquisition","Moving on"], correct:1},
                {q:"Peer support role?", options:["Blame","Validate","Ignore","Punish"], correct:1},
                {q:"Reckless behavior means?", options:["Unintentional","Risky","Conscious disregard","Lack training"], correct:2},
                {q:"Manager practical tip?", options:["Avoid talk","Punitive","Debriefing","Ignore"], correct:2},
                {q:"Common myth?", options:["Only inexperienced","Anyone","Silence helps","Experts err"], correct:0},
                {q:"Support resource?", options:["Gym","Peer support","Meals","Parking"], correct:1}
            ]},
            "A03": { title: "Medication Management", questions: [
                {q:"Hours to reconcile meds?", options:["1","2","4","6"], correct:1},
                {q:"NOT approved for orders?", options:["EMR","SMS","WhatsApp","B & C"], correct:3},
                {q:"Weight-based orders for?", options:["Adolescents","Adults","Paeds & elderly","Neonates"], correct:2},
                {q:"Complete KCl order needs?", options:["Dose/Diluent/Rate/Dur","Only Dose","Dose/Dur","Rate/Dur"], correct:0},
                {q:"High-risk med label color?", options:["Blue","Green","Red","Yellow"], correct:2}
            ]},
            "A04": { title: "Blood Transfusion", questions: [
                {q:"Most common procedure?", options:["Dialysis","Transfusion","Surgery","Biopsy"], correct:1},
                {q:"Units transfused annually?", options:["1M","5M","12M","20M"], correct:2},
                {q:"PRBC are usually?", options:["Non-leuco","Leucoreduced","Mixed","Granulocytes"], correct:1},
                {q:"Life-saving transfusion?", options:["Planned","Screening","Emergency","Neonatal"], correct:2},
                {q:"Consent validity?", options:["24h","48-72h","1 week","Admission"], correct:1}
            ]},
            "A05": { title: "CPR & Emergency", questions: [
                {q:"Compression-ventilation ratio?", options:["100:2","30:2","5:1","15:2"], correct:1},
                {q:"Compression purpose?", options:["Oxygenate blood","Damage","Brain damage","All"], correct:0},
                {q:"Compression rate/min?", options:["30","2","100","60"], correct:2},
                {q:"Resuscitation sequence?", options:["ABC","CAB","BAC","CBA"], correct:1},
                {q:"Choking infant response?", options:["30 thrusts","10 blows","Abdominal","5 back+5 chest"], correct:3}
            ]},
            "A06": { title: "Fire Safety", questions: [
                {q:"How to raise alarm?", options:["Shout","Call 6666","Call 2222",""], correct:1},
                {q:"Best action?", options:["Scream","Follow RACE","Shelter",""], correct:1},
                {q:"Extinguisher acronym?", options:["PASS","PULL","PUSH",""], correct:0},
                {q:"Use lifts?", options:["Yes","Maybe","No",""], correct:2},
                {q:"Open locked exit?", options:["Break glass","Green MCP","Red MCP",""], correct:1}
            ]},
            "A07": { title: "Infection Control", questions: [
                {q:"Most important HAI prevention?", options:["Hand wash","Prophylaxis","Mask","Isolation"], correct:0},
                {q:"Yellow bin for?", options:["Bandages","Cotton","Gauze","All"], correct:3},
                {q:"Red bin for?", options:["Gloves","IV","Catheter","All"], correct:3},
                {q:"Light blue bin?", options:["Paper","Waste","Gauze","All"], correct:1},
                {q:"PPE consists of?", options:["Gloves+Mask","Gown+Goggles","All","None"], correct:2}
            ]},
            "A08": { title: "Patient Safety", questions: [
                {q:"Patient ID data?", options:["UHID+Name","Bed+Name","Both","None"], correct:0},
                {q:"Vulnerable patients?", options:["<18",">65","Both","None"], correct:2},
                {q:"Patient rights?", options:["Confidentiality","Dignity","Info","All"], correct:3},
                {q:"Cardiac arrest code?", options:["Red","Blue","Pink","Black"], correct:1},
                {q:"Sentinel event form?", options:["ADR","Form F","SPANDAN","Intimation"], correct:2}
            ]},
            "A09": { title: "IPSG", questions: [
                {q:"NOT an IPSG?", options:["ID patient","Confidentiality","Reduce HAI","Safe surgery"], correct:1},
                {q:"Wrong site surgery goal?", options:["ID","Communication","Safe surgery","Reduce HAI"], correct:2},
                {q:"IPSG aim?", options:["Reduce wait","Satisfaction","Increase cost","Enhance safety"], correct:3},
                {q:"IPSG by?", options:["JCI","CDC","Red Cross","IMA"], correct:0},
                {q:"High-risk med goal?", options:["Med safety","Communication","ID","Surgery"], correct:0}
            ]},
            "A10": { title: "Radiation Safety", questions: [
                {q:"What is radiation?", options:["Energy","EM waves","Microwaves","None"], correct:0},
                {q:"Harmful type?", options:["Non-ionizing","Microwaves","MRI","Ionizing"], correct:3},
                {q:"Radiation ON sign?", options:["Green","Yellow","Red","None"], correct:2},
                {q:"Safety principle?", options:["ALARA","Shielding","Distance","Time"], correct:0},
                {q:"Monitoring device?", options:["TLD","Film","Survey","Ion"], correct:0}
            ]},
            "A11": { title: "Emergency Codes", questions: [
                {q:"Code Red by 6666 only?", options:["TRUE","FALSE","",""], correct:1},
                {q:"Extinguisher called PULL?", options:["TRUE","FALSE","",""], correct:1},
                {q:"Child abduction code?", options:["Black","Red","Pink","Violet"], correct:2},
                {q:"Bus accident inform?", options:["OCC","Dr Trehan","Emergency","Security"], correct:3},
                {q:"PM sticker has?", options:["Last date","Due","Serial","All"], correct:3}
            ]},
            "A12": { title: "Hospital Codes", questions: [
                {q:"Fire code?", options:["Blue","Red","Black","Yellow"], correct:1},
                {q:"Cardiac arrest number?", options:["1111","2222","6666","2020"], correct:1},
                {q:"RRT code?", options:["Orange","Zee","Pink","Brain"], correct:0},
                {q:"Bomb threat code?", options:["Black","Violet","Zee","Fall"], correct:0},
                {q:"Child abduction number?", options:["0","3333","5555","8888"], correct:2}
            ]},
            "A13": { title: "Cyber Security", questions: [
                {q:"Reduce password risk?", options:["Reuse","MFA","Text file","Birth year"], correct:1},
                {q:"Verify account email is?", options:["Pharming","Tailgating","Phishing","Spoofing"], correct:2},
                {q:"Encryption purpose?", options:["Speed","Prevent malware","Protect data","Remote"], correct:2},
                {q:"NOT PII?", options:["MR number","Cafeteria menu","Aadhaar","Phone"], correct:1},
                {q:"OS updates help?", options:["Resolution","Patch","Battery","Bypass"], correct:1}
            ]},
            "A14": { title: "Workplace Violence", questions: [
                {q:"WPV policy purpose?", options:["Attendance","Minimize","Violence-free","Salary"], correct:2},
                {q:"Applies to?", options:["Staff","Doctors","Patients","All"], correct:3},
                {q:"NOT violence?", options:["Verbal","Property","Feedback","Sexual"], correct:2},
                {q:"Code Violet?", options:["100","112","5555","911"], correct:2},
                {q:"Who trains?", options:["Management","Patients","Family","Vendors"], correct:0}
            ]},
            "A15": { title: "EMR Usage", questions: [
                {q:"EMR from?", options:["App store","Folder","Link","All"], correct:0},
                {q:"Critical cases using?", options:["Follow","Tag","Care team","Referral"], correct:2},
                {q:"Pen icon shows?", options:["Order","Order+date","Order+status","All"], correct:3},
                {q:"View lab tests?", options:["Uploaded","Reports","Charts","Summary"], correct:1},
                {q:"View vitals?", options:["Summary","Reports","Charts","Uploaded"], correct:2}
            ]},
            "A16": { title: "HIS", questions: [
                {q:"HIS stands for?", options:["Health Info","Hospital Info","Integration","Infra"], correct:1},
                {q:"NOT module?", options:["Registration","Clinical","Insurance","Social media"], correct:3},
                {q:"HIS purpose?", options:["Store","Revenue","Schedule","All"], correct:3},
                {q:"Module in HIS?", options:["Admin","Car","Social","Events"], correct:0},
                {q:"Info exchange term?", options:["Compatibility","Interoperability","Testing","Migration"], correct:1}
            ]},
            "A17": { title: "Documentation", questions: [
                {q:"Initial Assessment purpose?", options:["Payment","Complaints","Evaluation","Attendance"], correct:2},
                {q:"Attendant consent when?", options:["Unconscious","Requests","Minor","A&C"], correct:3},
                {q:"Max assessment time?", options:["30","120","90","60"], correct:1},
                {q:"Who signs adult consent?", options:["Patient","Attendant","Doctor","Family"], correct:0},
                {q:"Doctor within 2hrs?", options:["Prescribe","Assessment","Discharge","Collect"], correct:1}
            ]}
        };

        let currentModule = null;
        let currentQIndex = 0;
        let userXP = 0;
        let completedModules = 0;
        let moduleProgress = {};

        // CONFETTI
        function blastConfetti(amount = 50) {
            const container = document.getElementById('confetti-container');
            const colors = ['#D4AF37', '#8B1538', '#FFD700', '#e74c3c', '#28a745'];

            for (let i = 0; i < amount; i++) {
                const conf = document.createElement('div');
                conf.className = 'confetti-piece';
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.animationDelay = Math.random() * 2 + 's';
                conf.style.width = (Math.random() * 10 + 5) + 'px';
                conf.style.height = (Math.random() * 10 + 5) + 'px';
                container.appendChild(conf);
                setTimeout(() => conf.remove(), 3000);
            }
        }

        // XP
        function showXP(x, y) {
            const xp = document.createElement('div');
            xp.className = 'xp-popup';
            xp.textContent = '+10 XP!';
            xp.style.left = (x || window.innerWidth/2) + 'px';
            xp.style.top = (y || window.innerHeight/2) + 'px';
            document.body.appendChild(xp);
            setTimeout(() => xp.remove(), 1500);
        }

        function openHandbook() {
            blastConfetti(30);
            showXP();
        }

        function doLogin() {
            const name = document.getElementById('name').value;
            if (!name) {
                alert('Please enter your name');
                return;
            }

            blastConfetti(80);
            showXP();

            setTimeout(() => {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                renderModules();
            }, 1000);
        }

        function renderModules() {
            const list = document.getElementById('moduleList');
            list.innerHTML = '';

            Object.keys(modules).forEach((key) => {
                const mod = modules[key];
                const isDone = moduleProgress[key] === 100;

                const div = document.createElement('div');
                div.className = 'module-card ' + (isDone ? 'completed' : '');
                div.innerHTML = `
                    <div class="module-info">
                        <h3>${key}: ${mod.title}</h3>
                        <p>${mod.questions.length} Questions</p>
                    </div>
                    <div class="module-status">
                        ${isDone ? '‚úì' : '‚Üí'}
                    </div>
                `;
                div.onclick = () => startQuiz(key);
                list.appendChild(div);
            });

            document.getElementById('statModules').textContent = completedModules;
            document.getElementById('statXP').textContent = userXP;
            const percent = Math.round((completedModules / 17) * 100);
            document.getElementById('statPercent').textContent = percent + '%';
        }

        function startQuiz(modKey) {
            currentModule = modKey;
            currentQIndex = 0;
            document.getElementById('dashboard').classList.add('hidden');
            document.getElementById('quizScreen').classList.remove('hidden');
            document.getElementById('quizTitle').textContent = modules[modKey].title;
            document.getElementById('qTotal').textContent = modules[modKey].questions.length;
            showQuestion();
        }

        function showQuestion() {
            const q = modules[currentModule].questions[currentQIndex];
            document.getElementById('qCurrent').textContent = currentQIndex + 1;
            document.getElementById('qNum').textContent = currentQIndex + 1;
            document.getElementById('qText').textContent = q.q;

            const opts = document.getElementById('options');
            opts.innerHTML = '';

            const letters = ['A', 'B', 'C', 'D'];
            q.options.forEach((opt, idx) => {
                if (opt === '') return;
                const btn = document.createElement('div');
                btn.className = 'option';
                btn.innerHTML = `
                    <div class="option-letter">${letters[idx]}</div>
                    <div>${opt}</div>
                `;
                btn.onclick = (e) => checkAnswer(idx, e);
                opts.appendChild(btn);
            });
        }

        function checkAnswer(selected, event) {
            const q = modules[currentModule].questions[currentQIndex];
            const opts = document.querySelectorAll('.option');

            opts.forEach(o => o.style.pointerEvents = 'none');

            if (selected === q.correct) {
                opts[selected].classList.add('correct');
                userXP += 10;
                blastConfetti(20);
                showXP(event.clientX, event.clientY);
            } else {
                opts[selected].classList.add('wrong');
                opts[q.correct].classList.add('correct');
            }

            setTimeout(() => {
                currentQIndex++;
                if (currentQIndex < modules[currentModule].questions.length) {
                    showQuestion();
                } else {
                    moduleProgress[currentModule] = 100;
                    completedModules++;
                    blastConfetti(100);
                    setTimeout(() => {
                        alert('Module Complete! üéâ');
                        backToDash();
                    }, 800);
                }
            }, 1500);
        }

        function backToDash() {
            document.getElementById('quizScreen').classList.add('hidden');
            document.getElementById('dashboard').classList.remove('hidden');
            renderModules();
        }
    </script>
</body>
</html>